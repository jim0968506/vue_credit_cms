{"ast":null,"code":"import { createUser } from '@/apis/user';\nexport default {\n  data() {\n    return {\n      form: {\n        username: '',\n        password: '',\n        confirmPwd: '',\n        permission: '2'\n      },\n      rules: {\n        username: [{\n          required: true,\n          message: '必須輸入使用者名稱'\n        }],\n        password: [{\n          required: true,\n          message: '必須輸入密碼'\n        }],\n        //validatePass2方法檢測兩次密碼是否一致\n        confirmPwd: [{\n          required: true,\n          validator: this.validatePass2,\n          trigger: 'blur'\n        }],\n        permission: [{\n          required: true\n        }]\n      }\n    };\n  },\n  methods: {\n    validatePass2(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('請再次輸入密碼'));\n      } else if (value !== this.form.password) {\n        callback(new Error('兩次輸入密碼不一致!'));\n      } else {\n        callback();\n      }\n    },\n    async doCreate() {\n      this.$refs['form'].validate(async data => {\n        if (!data) return this.$message('表單驗證不通過');\n        let res = await createUser(this.form);\n        if (res.data.code === 20000) {\n          this.doReset();\n        }\n      });\n    },\n    doReset() {\n      this.$refs['form'].resetFields();\n    }\n  }\n};","map":{"version":3,"names":["createUser","data","form","username","password","confirmPwd","permission","rules","required","message","validator","validatePass2","trigger","methods","rule","value","callback","Error","doCreate","$refs","validate","$message","res","code","doReset","resetFields"],"sources":["src/views/permission/create.vue"],"sourcesContent":["<template>\r\n    <div class=\"form-box\">\r\n        <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-row>\r\n                <el-col :xl=12 :lg=12 :md=12 :sm=24 :xs=24>\r\n                    <el-form-item label=\"使用者名稱\" prop=\"username\">\r\n                        <el-input type='input' v-model=\"form.username\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row>\r\n                <el-col :xl=12 :lg=12 :md=12 :sm=24 :xs=24>\r\n                    <el-form-item label=\"密碼\" prop=\"password\">\r\n                        <el-input type='password' v-model=\"form.password\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row>\r\n                <el-col :xl=12 :lg=12 :md=12 :sm=24 :xs=24>\r\n                    <el-form-item label=\"確認密碼\" prop=\"confirmPwd\">\r\n                        <el-input type='password' v-model=\"form.confirmPwd\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n            <el-row>\r\n                <el-col :xl=8 :lg=8 :md=12 :sm=24 :xs=24>\r\n                    <el-form-item label=\"許可權分配\" prop=\"permission\">\r\n                        <el-radio v-model=\"form.permission\" label='2'>銷售人員</el-radio>\r\n                        <el-radio v-model=\"form.permission\" label='1'>初審人員</el-radio>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n        </el-form>\r\n        <div class=\"left\">\r\n            <el-button @click=\"doCreate\" type=\"primary\">建立管理員</el-button>\r\n            <el-button @click=\"doReset\">重置</el-button>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { createUser } from '@/apis/user'\r\nexport default {\r\n    data() {\r\n        return {\r\n            form: {\r\n                username: '',\r\n                password: '',\r\n                confirmPwd: '',\r\n                permission: '2'\r\n            },\r\n            rules: {\r\n                username: [{ required: true, message: '必須輸入使用者名稱' }],\r\n                password: [{ required: true, message: '必須輸入密碼' }],\r\n                //validatePass2方法檢測兩次密碼是否一致\r\n                confirmPwd: [{ required: true, validator: this.validatePass2, trigger: 'blur' }],\r\n                permission: [{ required: true }]\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        validatePass2(rule, value, callback) {\r\n            if (value === '') {\r\n                callback(new Error('請再次輸入密碼'));\r\n            } else if (value !== this.form.password) {\r\n                callback(new Error('兩次輸入密碼不一致!'));\r\n            } else {\r\n                callback();\r\n            }\r\n        },\r\n        async doCreate() {\r\n            this.$refs['form'].validate(async (data) => {\r\n                if (!data) return this.$message('表單驗證不通過')\r\n\r\n                let res = await createUser(this.form)\r\n                if (res.data.code === 20000) {\r\n                    this.doReset()\r\n                }\r\n            })\r\n\r\n        },\r\n        doReset() {\r\n            this.$refs['form'].resetFields()\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.form-box {\r\n    margin-top: 20px;\r\n}\r\n</style>"],"mappings":"AA4CA,SAAAA,UAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,UAAA;QACAC,UAAA;MACA;MACAC,KAAA;QACAJ,QAAA;UAAAK,QAAA;UAAAC,OAAA;QAAA;QACAL,QAAA;UAAAI,QAAA;UAAAC,OAAA;QAAA;QACA;QACAJ,UAAA;UAAAG,QAAA;UAAAE,SAAA,OAAAC,aAAA;UAAAC,OAAA;QAAA;QACAN,UAAA;UAAAE,QAAA;QAAA;MACA;IACA;EACA;EACAK,OAAA;IACAF,cAAAG,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA,WAAAF,KAAA,UAAAb,IAAA,CAAAE,QAAA;QACAY,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA,MAAAE,SAAA;MACA,KAAAC,KAAA,SAAAC,QAAA,OAAAnB,IAAA;QACA,KAAAA,IAAA,cAAAoB,QAAA;QAEA,IAAAC,GAAA,SAAAtB,UAAA,MAAAE,IAAA;QACA,IAAAoB,GAAA,CAAArB,IAAA,CAAAsB,IAAA;UACA,KAAAC,OAAA;QACA;MACA;IAEA;IACAA,QAAA;MACA,KAAAL,KAAA,SAAAM,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}