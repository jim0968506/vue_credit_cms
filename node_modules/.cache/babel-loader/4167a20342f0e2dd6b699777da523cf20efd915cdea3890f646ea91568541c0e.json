{"ast":null,"code":"import Breadcrumb from \"@/components/Breadcrumb.vue\";\nimport { logout } from \"@/apis/user\";\nimport asideMenu from \"@/components/asideMenu.vue\";\nexport default {\n  components: {\n    Breadcrumb,\n    asideMenu\n  },\n  methods: {\n    async doCommand(e) {\n      if (e === \"logout\") {\n        let res = await logout();\n        if (res.data.code === 20000) {\n          //這裡需要await阻塞一下，避免下面重新整理先執行\n          await this.$router.replace(\"/login\");\n\n          //退出成功時清掉所有的儲存資訊\n          localStorage.clear();\n          //跳轉後重新整理下頁面，清除掉路由資訊\n          window.location.reload();\n        }\n      }\n    }\n  },\n  computed: {\n    userName() {\n      return this.$store.state.userName;\n    },\n    menuList() {\n      return this.$store.state.menuList;\n    }\n  }\n};","map":{"version":3,"names":["Breadcrumb","logout","asideMenu","components","methods","doCommand","e","res","data","code","$router","replace","localStorage","clear","window","location","reload","computed","userName","$store","state","menuList"],"sources":["src/layout/layout.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-container>\r\n            <el-aside width=\"240px\">\r\n                <!-- 新增router，開啟路由模式-->\r\n                <el-menu router class=\"el-menu-vertical-demo\" background-color=\"#545c64\" text-color=\"#fff\"\r\n                    active-text-color=\"#ffd04b\">\r\n                    <!-- for迴圈選單元件，傳入每一個選單項-->\r\n                    <asideMenu v-for=\"(menu, index) in menuList\" :menu=\"menu\" :key=\"index\" />\r\n                </el-menu>\r\n\r\n            </el-aside>\r\n            <el-container>\r\n                <el-header>\r\n                    <!--//左側面包屑-->\r\n                    <div class=\"left\">\r\n                        <Breadcrumb />\r\n                    </div>\r\n                    <!--//右側使用者名稱-->\r\n                    <div class=\"right\">\r\n                        <el-dropdown @command=\"doCommand\">\r\n                            <!-- 把這裡寫死的admin改成{{userName}}-->\r\n                            <span class=\"el-dropdown-link\">{{ userName }}</span>\r\n                            <el-dropdown-menu slot=\"dropdown\">\r\n                                <el-dropdown-item command=\"logout\">退出登入</el-dropdown-item>\r\n                            </el-dropdown-menu>\r\n                        </el-dropdown>\r\n                    </div>\r\n                </el-header>\r\n                <el-main>\r\n                    <!-- //放置一個路由出口 -->\r\n                    <router-view />\r\n                </el-main>\r\n            </el-container>\r\n        </el-container>\r\n    </div>\r\n</template> \r\n\r\n<script>\r\nimport Breadcrumb from \"@/components/Breadcrumb.vue\"\r\nimport { logout } from \"@/apis/user\"\r\nimport asideMenu from \"@/components/asideMenu.vue\"\r\nexport default {\r\n    components: {\r\n        Breadcrumb,\r\n        asideMenu\r\n    },\r\n    methods: {\r\n        async doCommand(e) {\r\n            if (e === \"logout\") {\r\n                let res = await logout()\r\n                if (res.data.code === 20000) {\r\n                    //這裡需要await阻塞一下，避免下面重新整理先執行\r\n                    await this.$router.replace(\"/login\")\r\n\r\n                    //退出成功時清掉所有的儲存資訊\r\n                    localStorage.clear()\r\n                    //跳轉後重新整理下頁面，清除掉路由資訊\r\n                    window.location.reload()\r\n                }\r\n\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        userName() {\r\n            return this.$store.state.userName\r\n        },\r\n        menuList() {\r\n            return this.$store.state.menuList\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\na:link {\r\n    text-decoration: none;\r\n    color: #fff;\r\n\r\n}\r\n\r\n/* 狀態二: 已經訪問過的連結 */\r\na:visited {\r\n    text-decoration: none;\r\n    color: #fff;\r\n}\r\n\r\n/* 狀態三: 滑鼠劃過(停留)的連結(預設紅色) */\r\na:hover {\r\n    text-decoration: none;\r\n    color: #fff;\r\n}\r\n\r\n/* 狀態四: 被點選的連結 */\r\na:active {\r\n    text-decoration: none;\r\n    color: #fff;\r\n}\r\n\r\n.el-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.el-footer {\r\n    background-color: #B3C0D1;\r\n    color: #333;\r\n    text-align: center;\r\n    line-height: 60px;\r\n}\r\n\r\n.el-aside {\r\n    background-color: #545c64;\r\n    color: #333;\r\n    text-align: center;\r\n    line-height: 200px;\r\n}\r\n\r\n.el-main {\r\n    background-color: #E9EEF3;\r\n    color: #333;\r\n    text-align: center;\r\n}\r\n\r\n.el-container {\r\n    height: 100%;\r\n}\r\n\r\n.el-menu-vertical-demo {\r\n    border: none;\r\n}\r\n</style>"],"mappings":"AAuCA,OAAAA,UAAA;AACA,SAAAC,MAAA;AACA,OAAAC,SAAA;AACA;EACAC,UAAA;IACAH,UAAA;IACAE;EACA;EACAE,OAAA;IACA,MAAAC,UAAAC,CAAA;MACA,IAAAA,CAAA;QACA,IAAAC,GAAA,SAAAN,MAAA;QACA,IAAAM,GAAA,CAAAC,IAAA,CAAAC,IAAA;UACA;UACA,WAAAC,OAAA,CAAAC,OAAA;;UAEA;UACAC,YAAA,CAAAC,KAAA;UACA;UACAC,MAAA,CAAAC,QAAA,CAAAC,MAAA;QACA;MAEA;IACA;EACA;EACAC,QAAA;IACAC,SAAA;MACA,YAAAC,MAAA,CAAAC,KAAA,CAAAF,QAAA;IACA;IACAG,SAAA;MACA,YAAAF,MAAA,CAAAC,KAAA,CAAAC,QAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}