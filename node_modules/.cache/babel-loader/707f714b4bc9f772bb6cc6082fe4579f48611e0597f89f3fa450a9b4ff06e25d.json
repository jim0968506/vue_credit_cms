{"ast":null,"code":"import { userList } from '@/apis/user.js';\nexport default {\n  data() {\n    return {\n      pageOptions: {\n        pageNo: 1,\n        pageSize: 10\n      },\n      rows: 0,\n      tableData: [],\n      columns: [{\n        label: \"使用者名稱\",\n        prop: \"account\"\n      }, {\n        label: \"密碼\",\n        prop: \"password\"\n      }, {\n        label: '建立時間',\n        prop: 'reg_time'\n      }, {\n        label: '建立者',\n        prop: 'creator'\n      }, {\n        label: '許可權分配',\n        prop: 'role_name'\n      }]\n    };\n  },\n  methods: {\n    getTime(date) {\n      function convertTime(n) {\n        return n < 10 ? '0' + n : n;\n      }\n      let d2 = new Date(date);\n      return d2.getFullYear() + '-' + convertTime(d2.getMonth() + 1) + '-' + convertTime(d2.getDate()) + ' ' + convertTime(d2.getHours()) + ':' + convertTime(d2.getSeconds()) + ':' + convertTime(d2.getMinutes());\n    },\n    getRole(s) {\n      switch (s) {\n        case 'input':\n          return '銷售專員';\n        case 'approve':\n          return '初審專員';\n        case 'administrator':\n          return '超級管理員';\n      }\n    },\n    handleCurrentChange(pageNo) {\n      this.pageOptions.pageNo = pageNo;\n      this.getUserList();\n    },\n    updateSize(pageSize) {\n      this.pageOptions.pageSize = pageSize;\n      this.getUserList();\n    },\n    //獲取列表展示\n    async getUserList() {\n      let res = await userList();\n      if (res.data.code === 20000) {\n        let {\n          pageNo,\n          pageSize\n        } = this.pageOptions;\n        this.rows = res.data.data.length;\n        let tableDataNew = res.data.data;\n        tableDataNew = tableDataNew.slice((pageNo - 1) * pageSize, pageNo * pageSize);\n        tableDataNew = tableDataNew.map(item => {\n          item.reg_time = this.getTime(item.reg_time);\n          item.role_name = this.getRole(item.role_name);\n          return item;\n        });\n        this.tableData = tableDataNew;\n      }\n    }\n  },\n  mounted() {\n    this.getUserList();\n  }\n};","map":{"version":3,"names":["userList","data","pageOptions","pageNo","pageSize","rows","tableData","columns","label","prop","methods","getTime","date","convertTime","n","d2","Date","getFullYear","getMonth","getDate","getHours","getSeconds","getMinutes","getRole","s","handleCurrentChange","getUserList","updateSize","res","code","length","tableDataNew","slice","map","item","reg_time","role_name","mounted"],"sources":["src/views/permission/list.vue"],"sourcesContent":["<template>\r\n    <div id=\"input-manager\">\r\n        <el-table :data=\"tableData\" stripe style=\"width: 100%\">\r\n            <el-table-column type=\"index\" label=\"序號\" width=\"80\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column v-for=\"(item, index) in columns\" :key=\"index\" :prop=\"item.prop\" :label=\"item.label\"\r\n                :width=\"item.width\" align=\"center\">\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination @current-change=\"handleCurrentChange\" @size-change=\"updateSize\" :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"pageOptions.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"rows\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { userList } from '@/apis/user.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            pageOptions: {\r\n                pageNo: 1,\r\n                pageSize: 10\r\n            },\r\n            rows: 0,\r\n            tableData: [],\r\n            columns: [\r\n                {\r\n                    label: \"使用者名稱\",\r\n                    prop: \"account\",\r\n                },\r\n                {\r\n                    label: \"密碼\",\r\n                    prop: \"password\",\r\n                },\r\n                {\r\n                    label: '建立時間',\r\n                    prop: 'reg_time',\r\n                },\r\n                {\r\n                    label: '建立者',\r\n                    prop: 'creator'\r\n                },\r\n                {\r\n                    label: '許可權分配',\r\n                    prop: 'role_name',\r\n                }\r\n\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n\r\n        getTime(date) {\r\n\r\n            function convertTime(n) {\r\n                return n < 10 ? '0' + n : n\r\n            }\r\n            let d2 = new Date(date)\r\n            return d2.getFullYear() + '-'\r\n                + convertTime(d2.getMonth() + 1) + '-'\r\n                + convertTime(d2.getDate()) + ' '\r\n                + convertTime(d2.getHours()) + ':'\r\n                + convertTime(d2.getSeconds()) + ':'\r\n                + convertTime(d2.getMinutes())\r\n        },\r\n        getRole(s) {\r\n            switch (s) {\r\n                case 'input':\r\n                    return '銷售專員'\r\n                case 'approve':\r\n                    return '初審專員'\r\n                case 'administrator':\r\n                    return '超級管理員'\r\n            }\r\n        },\r\n        handleCurrentChange(pageNo) {\r\n            this.pageOptions.pageNo = pageNo\r\n            this.getUserList()\r\n        },\r\n        updateSize(pageSize) {\r\n            this.pageOptions.pageSize = pageSize\r\n            this.getUserList()\r\n        },\r\n        //獲取列表展示\r\n        async getUserList() {\r\n            let res = await userList();\r\n            if (res.data.code === 20000) {\r\n                let { pageNo, pageSize } = this.pageOptions;\r\n                this.rows = res.data.data.length;\r\n                let tableDataNew = res.data.data;\r\n                tableDataNew = tableDataNew.slice(\r\n                    (pageNo - 1) * pageSize,\r\n                    pageNo * pageSize\r\n                );\r\n                tableDataNew = tableDataNew.map((item) => {\r\n                    item.reg_time = this.getTime(item.reg_time);\r\n                    item.role_name = this.getRole(item.role_name);\r\n                    return item;\r\n                });\r\n                this.tableData = tableDataNew;\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        this.getUserList()\r\n    }\r\n}\r\n</script>"],"mappings":"AAgBA,SAAAA,QAAA;AACA;EACAC,KAAA;IACA;MACAC,WAAA;QACAC,MAAA;QACAC,QAAA;MACA;MACAC,IAAA;MACAC,SAAA;MACAC,OAAA,GACA;QACAC,KAAA;QACAC,IAAA;MACA,GACA;QACAD,KAAA;QACAC,IAAA;MACA,GACA;QACAD,KAAA;QACAC,IAAA;MACA,GACA;QACAD,KAAA;QACAC,IAAA;MACA,GACA;QACAD,KAAA;QACAC,IAAA;MACA;IAGA;EACA;EACAC,OAAA;IAEAC,QAAAC,IAAA;MAEA,SAAAC,YAAAC,CAAA;QACA,OAAAA,CAAA,cAAAA,CAAA,GAAAA,CAAA;MACA;MACA,IAAAC,EAAA,OAAAC,IAAA,CAAAJ,IAAA;MACA,OAAAG,EAAA,CAAAE,WAAA,WACAJ,WAAA,CAAAE,EAAA,CAAAG,QAAA,gBACAL,WAAA,CAAAE,EAAA,CAAAI,OAAA,YACAN,WAAA,CAAAE,EAAA,CAAAK,QAAA,YACAP,WAAA,CAAAE,EAAA,CAAAM,UAAA,YACAR,WAAA,CAAAE,EAAA,CAAAO,UAAA;IACA;IACAC,QAAAC,CAAA;MACA,QAAAA,CAAA;QACA;UACA;QACA;UACA;QACA;UACA;MACA;IACA;IACAC,oBAAAtB,MAAA;MACA,KAAAD,WAAA,CAAAC,MAAA,GAAAA,MAAA;MACA,KAAAuB,WAAA;IACA;IACAC,WAAAvB,QAAA;MACA,KAAAF,WAAA,CAAAE,QAAA,GAAAA,QAAA;MACA,KAAAsB,WAAA;IACA;IACA;IACA,MAAAA,YAAA;MACA,IAAAE,GAAA,SAAA5B,QAAA;MACA,IAAA4B,GAAA,CAAA3B,IAAA,CAAA4B,IAAA;QACA;UAAA1B,MAAA;UAAAC;QAAA,SAAAF,WAAA;QACA,KAAAG,IAAA,GAAAuB,GAAA,CAAA3B,IAAA,CAAAA,IAAA,CAAA6B,MAAA;QACA,IAAAC,YAAA,GAAAH,GAAA,CAAA3B,IAAA,CAAAA,IAAA;QACA8B,YAAA,GAAAA,YAAA,CAAAC,KAAA,CACA,CAAA7B,MAAA,QAAAC,QAAA,EACAD,MAAA,GAAAC,QACA;QACA2B,YAAA,GAAAA,YAAA,CAAAE,GAAA,CAAAC,IAAA;UACAA,IAAA,CAAAC,QAAA,QAAAxB,OAAA,CAAAuB,IAAA,CAAAC,QAAA;UACAD,IAAA,CAAAE,SAAA,QAAAb,OAAA,CAAAW,IAAA,CAAAE,SAAA;UACA,OAAAF,IAAA;QACA;QACA,KAAA5B,SAAA,GAAAyB,YAAA;MACA;IACA;EACA;EACAM,QAAA;IACA,KAAAX,WAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}