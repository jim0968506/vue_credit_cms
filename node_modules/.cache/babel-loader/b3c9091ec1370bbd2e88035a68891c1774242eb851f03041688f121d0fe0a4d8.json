{"ast":null,"code":"import { queryList, approveFirst } from \"@/apis/loan.js\";\nexport default {\n  data() {\n    return {\n      pageOptions: {\n        pageNo: 1,\n        pageSize: 10\n      },\n      form: {},\n      dialogVisible: false,\n      rows: 0,\n      query: '',\n      tableData: [],\n      columns: [{\n        label: \"姓名\",\n        prop: \"name\",\n        width: \"80\"\n      }, {\n        label: \"出生日期\",\n        prop: \"birthday\",\n        width: \"160\"\n      }, {\n        label: \"身份證\",\n        prop: \"identity_card\",\n        width: \"260\"\n      }, {\n        label: \"操作\",\n        // width: \"280\",\n        prop: \"opts\"\n      }]\n    };\n  },\n  methods: {\n    async setQueryName() {\n      this.pageOptions.name = this.query;\n      await this.getFirstList();\n      this.pageOptions.name = null;\n    },\n    convertBirthday(date) {\n      function convertTime(n) {\n        return n < 10 ? '0' + n : n;\n      }\n      let d2 = new Date(date);\n      return d2.getFullYear() + '-' + convertTime(d2.getMonth() + 1) + '-' + convertTime(d2.getDate()) + ' ' + convertTime(d2.getHours()) + ':' + convertTime(d2.getSeconds()) + ':' + convertTime(d2.getMinutes());\n    },\n    async getFirstList() {\n      let res = await queryList(this.pageOptions);\n      if (res.data.code === 20000) {\n        this.tableData = res.data.data.data.data.map(item => {\n          item.birthday = this.convertBirthday(item.birthday);\n          return item;\n        });\n        this.rows = res.data.data.rows;\n      }\n    },\n    showInfo(row) {\n      this.form = row;\n      this.dialogVisible = true;\n    },\n    // 審批\n    async submit(id, flag) {\n      let res = await approveFirst(id, flag);\n      if (res.data.code === 20000) {\n        this.getFirstList();\n      }\n    },\n    handleCurrentChange(pageNo) {\n      this.pageOptions.pageNo = pageNo;\n      this.getFirstList();\n    },\n    updateSize(pageSize) {\n      this.pageOptions.pageSize = pageSize;\n      this.getFirstList();\n    }\n  },\n  mounted() {\n    this.getFirstList();\n  }\n};","map":{"version":3,"names":["queryList","approveFirst","data","pageOptions","pageNo","pageSize","form","dialogVisible","rows","query","tableData","columns","label","prop","width","methods","setQueryName","name","getFirstList","convertBirthday","date","convertTime","n","d2","Date","getFullYear","getMonth","getDate","getHours","getSeconds","getMinutes","res","code","map","item","birthday","showInfo","row","submit","id","flag","handleCurrentChange","updateSize","mounted"],"sources":["src/views/loan-approve/first.vue"],"sourcesContent":["<template>\r\n    <div id=\"input-manager\">\r\n        <el-row>\r\n            <el-col :span=\"22\">\r\n                <el-input placeholder=\"請輸入名稱\" type=\"text\" v-model=\"query\"></el-input>\r\n            </el-col>\r\n            <el-col :span=\"2\">\r\n                <!-- 按鈕 -->\r\n                <el-button type=\"primary\" @click=\"setQueryName\">搜尋</el-button>\r\n            </el-col>\r\n        </el-row>\r\n        <el-table :data=\"tableData\" id=\"gbox\" :useIndex=\"true\" :stripe=\"true\" :border=\"true\" :fit=\"true\" empty-text=\"暫無數據\"\r\n            :useMultiSelect=\"false\">\r\n            <el-table-column type=\"index\" label=\"序號\" width=\"55\" align=\"center\">\r\n            </el-table-column>\r\n            <el-table-column v-for=\"(col, index) in columns\" :key=\"index\" :label=\"col.label\" :prop=\"col.prop\"\r\n                :width=\"col.width\">\r\n                <!--插槽，如果當前列是操作，新增三個按鈕-->\r\n                <template v-slot=\"{ column, row }\">\r\n                    <div v-if=\"column.property === 'opts'\">\r\n                        <el-button @click=\"showInfo(row)\" type=\"primary\">檢視</el-button>\r\n                        <!-- 傳入pass和reject代表呼叫通過或者拒絕介面-->\r\n                        <el-button @click=\"submit(row.id, 'pass')\" type=\"success\">通過</el-button>\r\n                        <el-button @click=\"submit(row.id, 'reject')\" type=\"danger\">拒絕</el-button>\r\n                    </div>\r\n                    <div v-else>\r\n                        {{ row[column.property] }}\r\n                    </div>\r\n                </template>\r\n\r\n            </el-table-column>\r\n\r\n\r\n        </el-table>\r\n        <el-pagination @current-change=\"handleCurrentChange\" @size-change=\"updateSize\" :page-sizes=\"[10, 20, 30, 40]\"\r\n            :page-size=\"pageOptions.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"rows\">\r\n        </el-pagination>\r\n        <el-dialog title=\"貸款審批-檢視詳情\" :visible=\"dialogVisible\" @close=\"dialogVisible = false\" width=\"30%\">\r\n            <div class=\"form-box\" v-if=\"dialogVisible\">\r\n                <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n                    <el-row>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"id\" prop=\"id\">\r\n                                <el-input type='input' v-model=\"form.id\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"姓名\" prop=\"name\">\r\n                                <el-input type='input' v-model=\"form.name\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"出生日期\" prop=\"birthday\">\r\n                                <el-input type='input' v-model=\"form.birthday\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"性別\" prop=\"sex\">\r\n                                <el-input type='input' v-model=\"form.sex\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"教育程度\" prop=\"education\">\r\n                                <el-input type='input' v-model=\"form.education\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"地址\" prop=\"address1\">\r\n                                <el-input type='input' v-model=\"form.address1\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"手機號\" prop=\"phone\">\r\n                                <el-input type='input' v-model=\"form.phone\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                        <el-col :xl=24 :lg=24 :md=12 :sm=24 :xs=24>\r\n                            <el-form-item label=\"身份證\" prop=\"identity_card\">\r\n                                <el-input type='input' v-model=\"form.identity_card\" disabled></el-input>\r\n                            </el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-form>\r\n\r\n                <div class=\"btns clear-fix\">\r\n                    <div>\r\n                        <el-button type=\"primary\" @click=\"dialogVisible = !dialogVisible\">取消</el-button>\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { queryList, approveFirst } from \"@/apis/loan.js\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            pageOptions: {\r\n                pageNo: 1,\r\n                pageSize: 10\r\n            },\r\n            form: {\r\n\r\n            },\r\n            dialogVisible: false,\r\n            rows: 0,\r\n            query: '',\r\n            tableData: [],\r\n            columns: [\r\n                {\r\n                    label: \"姓名\",\r\n                    prop: \"name\",\r\n                    width: \"80\",\r\n                },\r\n                {\r\n                    label: \"出生日期\",\r\n                    prop: \"birthday\",\r\n                    width: \"160\",\r\n                },\r\n                {\r\n                    label: \"身份證\",\r\n                    prop: \"identity_card\",\r\n                    width: \"260\",\r\n                },\r\n                {\r\n                    label: \"操作\",\r\n                    // width: \"280\",\r\n                    prop: \"opts\",\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    methods: {\r\n        async setQueryName() {\r\n            this.pageOptions.name = this.query\r\n            await this.getFirstList()\r\n            this.pageOptions.name = null\r\n        },\r\n        convertBirthday(date) {\r\n            function convertTime(n) {\r\n                return n < 10 ? '0' + n : n\r\n            }\r\n            let d2 = new Date(date)\r\n            return d2.getFullYear() + '-'\r\n                + convertTime(d2.getMonth() + 1) + '-'\r\n                + convertTime(d2.getDate()) + ' '\r\n                + convertTime(d2.getHours()) + ':'\r\n                + convertTime(d2.getSeconds()) + ':'\r\n                + convertTime(d2.getMinutes())\r\n        },\r\n        async getFirstList() {\r\n            let res = await queryList(this.pageOptions);\r\n            if (res.data.code === 20000) {\r\n                this.tableData = res.data.data.data.data.map((item) => {\r\n                    item.birthday = this.convertBirthday(item.birthday);\r\n                    return item;\r\n                });\r\n                this.rows = res.data.data.rows;\r\n            }\r\n        },\r\n        showInfo(row) {\r\n            this.form = row\r\n            this.dialogVisible = true\r\n        },\r\n        // 審批\r\n        async submit(id, flag) {\r\n            let res = await approveFirst(id, flag);\r\n            if (res.data.code === 20000) {\r\n                this.getFirstList();\r\n            }\r\n        },\r\n        handleCurrentChange(pageNo) {\r\n            this.pageOptions.pageNo = pageNo\r\n            this.getFirstList()\r\n        },\r\n        updateSize(pageSize) {\r\n            this.pageOptions.pageSize = pageSize\r\n            this.getFirstList()\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getFirstList();\r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n::v-deep .el-table--scrollable-x .el-table__body-wrapper {\r\n    overflow-x: hidden;\r\n}\r\n\r\n.el-select,\r\n.el-input {\r\n    width: 100%;\r\n}\r\n\r\n.btns {\r\n    text-align: center;\r\n}\r\n\r\n.box-card {\r\n    margin-bottom: 10px;\r\n\r\n    >div {\r\n        >div {\r\n            text-align: left;\r\n        }\r\n    }\r\n}\r\n\r\n.el-row {\r\n    margin-bottom: 10px;\r\n}\r\n</style>"],"mappings":"AAiGA,SAAAA,SAAA,EAAAC,YAAA;AAEA;EACAC,KAAA;IACA;MACAC,WAAA;QACAC,MAAA;QACAC,QAAA;MACA;MACAC,IAAA,GAEA;MACAC,aAAA;MACAC,IAAA;MACAC,KAAA;MACAC,SAAA;MACAC,OAAA,GACA;QACAC,KAAA;QACAC,IAAA;QACAC,KAAA;MACA,GACA;QACAF,KAAA;QACAC,IAAA;QACAC,KAAA;MACA,GACA;QACAF,KAAA;QACAC,IAAA;QACAC,KAAA;MACA,GACA;QACAF,KAAA;QACA;QACAC,IAAA;MACA;IAEA;EACA;EACAE,OAAA;IACA,MAAAC,aAAA;MACA,KAAAb,WAAA,CAAAc,IAAA,QAAAR,KAAA;MACA,WAAAS,YAAA;MACA,KAAAf,WAAA,CAAAc,IAAA;IACA;IACAE,gBAAAC,IAAA;MACA,SAAAC,YAAAC,CAAA;QACA,OAAAA,CAAA,cAAAA,CAAA,GAAAA,CAAA;MACA;MACA,IAAAC,EAAA,OAAAC,IAAA,CAAAJ,IAAA;MACA,OAAAG,EAAA,CAAAE,WAAA,WACAJ,WAAA,CAAAE,EAAA,CAAAG,QAAA,gBACAL,WAAA,CAAAE,EAAA,CAAAI,OAAA,YACAN,WAAA,CAAAE,EAAA,CAAAK,QAAA,YACAP,WAAA,CAAAE,EAAA,CAAAM,UAAA,YACAR,WAAA,CAAAE,EAAA,CAAAO,UAAA;IACA;IACA,MAAAZ,aAAA;MACA,IAAAa,GAAA,SAAA/B,SAAA,MAAAG,WAAA;MACA,IAAA4B,GAAA,CAAA7B,IAAA,CAAA8B,IAAA;QACA,KAAAtB,SAAA,GAAAqB,GAAA,CAAA7B,IAAA,CAAAA,IAAA,CAAAA,IAAA,CAAAA,IAAA,CAAA+B,GAAA,CAAAC,IAAA;UACAA,IAAA,CAAAC,QAAA,QAAAhB,eAAA,CAAAe,IAAA,CAAAC,QAAA;UACA,OAAAD,IAAA;QACA;QACA,KAAA1B,IAAA,GAAAuB,GAAA,CAAA7B,IAAA,CAAAA,IAAA,CAAAM,IAAA;MACA;IACA;IACA4B,SAAAC,GAAA;MACA,KAAA/B,IAAA,GAAA+B,GAAA;MACA,KAAA9B,aAAA;IACA;IACA;IACA,MAAA+B,OAAAC,EAAA,EAAAC,IAAA;MACA,IAAAT,GAAA,SAAA9B,YAAA,CAAAsC,EAAA,EAAAC,IAAA;MACA,IAAAT,GAAA,CAAA7B,IAAA,CAAA8B,IAAA;QACA,KAAAd,YAAA;MACA;IACA;IACAuB,oBAAArC,MAAA;MACA,KAAAD,WAAA,CAAAC,MAAA,GAAAA,MAAA;MACA,KAAAc,YAAA;IACA;IACAwB,WAAArC,QAAA;MACA,KAAAF,WAAA,CAAAE,QAAA,GAAAA,QAAA;MACA,KAAAa,YAAA;IACA;EACA;EACAyB,QAAA;IACA,KAAAzB,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}